1 ' Copyright (c) 2	023 emef220 
2 ' Released under the MIT license
3 ' https://opensource.org/licenses/mit-license.php
401 CLS:DEFINTA-Z
411 DIM P%(10,16),Q%(10,16)
412 PT%=PEEK(&H7):W=1:FR%=15:CP%=0:ED%=316
420 COLOR15,0,0:SCREEN5
421 VDP(0)=0:VDP(1)=&H68:VDP(10)=VDP(10) AND &H7F
422 T=1:BASE(15)=0:BASE(17)=&H800:VDP(2)=0:VDP(4)=T
424 VDP(9)=VDP(9) OR &H22

430 DEFUSR=&H41:A=USR(0)
431 W=0:POKE&HFAF6,W
432 I=1+CP%:FL$=MID$(STR$(I),2):BLOAD FL$,S:I=3+I:FL$=MID$(STR$(I),2):BLOAD FL$,S
433 GOSUB 900:GOSUB 910
434 DEFUSR=&H44:A=USR(0) 

485 T=1+CP%:ONINTERVAL=FR%GOSUB500:INTERVALON:TIME=0
490 IFINKEY$=""GOTO490 ELSE END

500 VDP(4)=(T)AND31:T=T+1:GOSUB800:RETURN

800 IF T=ED% THEN GOSUB821:RETURN
801 IF TMOD4=0 THEN J=((T)AND31)\4:GOSUB 809
808 RETURN
809 ON J+1 GOSUB 810,811,811,811,812,811,811,811:T=T+1:RETURN
810 POKE&HFAF6,0:CP%=CP%+32:T=CP%+1:FL$=MID$(STR$(T),2):BLOAD FL$,S:VDP(4)=(T)AND31:GOSUB910:RETURN
811 FL$=MID$(STR$(T),2):BLOAD FL$,S:VDP(4)=(T)AND31:RETURN
812 POKE&HFAF6,1:FL$=MID$(STR$(T),2):BLOAD FL$,S:VDP(4)=(T)AND31:GOSUB910:RETURN
813 POKE&HFAF6,0:CP%=0:T=CP%+1:FL$=MID$(STR$(T),2):BLOAD FL$,S:VDP(4)=(T)AND31:GOSUB910:RETURN
821 SCREEN0:PRINT "TIME"TIME:END

900 VP=&H0420
901 FOR T=0TO312STEP32
902 U=T+1:FL$=MID$(STR$(U),2):BLOAD FL$,S
903 FOR I=0 TO 15:P1=VPEEK(VP+I*2):P2=VPEEK(VP+I*2+1):P%(T/32,I)=P1:Q%(T/32,I)=P2:NEXTI
904 NEXT T:RETURN

910 FOR I=0 TO 15:VDP(17)=I:OUTPT%+2,P%(T/32,I):OUTPT%+2,Q%(T/32,I):NEXTI:RETURN